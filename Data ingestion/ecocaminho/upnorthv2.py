import os
import requests
import json
import sys
import datetime
import base64

import mysql.connector
from mysql.connector import Error

persiste=False
#persiste=True



now=datetime.datetime.now()
agora=datetime.datetime.now()

inicio= (agora - datetime.timedelta(hours=24)).strftime("%Y-%m-%dT%H:00:00")
fim = (agora - datetime.timedelta(hours=23)).strftime("%Y-%m-%dT%H:00:00")


print ("De", inicio, " a ", fim)

a=None

client_id = "maya_api"
client_secret = "oZGsScwcWZAR[Tbq"
encodedData = base64.b64encode(bytes(f"{client_id}:{client_secret}", "ISO-8859-1")).decode("ascii")
authorization_header_string = f"Basic {encodedData}"

#print("AHS", authorization_header_string)

dados ="teste"
#dados =[{"id":100042858,"name":"Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/89/729518f93e3c8a9f3f1c8eabac7551330549694c9717180e68651e0963955189/15257711827240.jpg"],"counter":"X2H18014173","type":"real","visible":true,"channels":[{"id":101042858,"name":"Escuteiros Pedestres Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102042858,"name":"Escuteiros Pedestres Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103042858,"name":"Escuteiros Bicicleta Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104042858,"name":"Escuteiros Bicicleta Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null},{"id":100042868,"name":"Souto","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/dd/41ab4498d9b33296c5c8c8694079780851f83cf32ef1638d0ddf6b9ece9e25dd/15208520922911.jpg","https://filer.eco-counter-tools.com/file/29/5f6363762dd5082fddab4ab18194e4471e790630ec64982d25507b59cbad8e29/15257709040250.jpg"],"counter":"X2H17113874","type":"real","visible":true,"channels":[{"id":101042868,"name":"Multi Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102042868,"name":"Multi Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103042868,"name":"Multi Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104042868,"name":"Multi Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null},{"id":100042890,"name":"Estação","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/67/ef332c1e4f860f90ef947ba71f7410f22d1974d469ff6605d3f15fa1e6bb0e67/15220742570611.jpg","https://filer.eco-counter-tools.com/file/3b/f8b8e266503e9fd8d508c901b1fc7ff2b4319c33699c109bb173b9b4441e2a3b/15220742573493.jpg","https://filer.eco-counter-tools.com/file/8d/0a623af573545b43a0aa963ec65d3eb145a801dc7ea736832ed995b0d043898d/15220742571482.jpg"],"counter":"XMI17113875","type":"real","visible":true,"channels":[{"id":101042890,"name":"Mobile Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102042890,"name":"Mobile Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103042890,"name":"Mobile Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104042890,"name":"Mobile Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null},{"id":100044581,"name":"teste","domainId":6167,"domain":"Município da Maia","latitude":0.0,"longitude":0.0,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":[],"counter":null,"type":"virtual","visible":true,"channels":[],"tags":[],"attributes":null},{"id":100044582,"name":"Mobile","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":[],"counter":null,"type":"virtual","visible":false,"channels":[],"tags":[],"attributes":null},{"id":100048817,"name":"Vias Paralelas","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/a2/47412a494433b00d833ce72573877a58d94f1f43240d40df952941d938b3c7a2/15504911057190.jpg"],"counter":"X2I18116922","type":"real","visible":true,"channels":[{"id":101048817,"name":"Channel 1 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102048817,"name":"Channel 2 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103048817,"name":"Channel 3 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104048817,"name":"Channel 4 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null}]
#dados=[{"id":100042858,"name":"Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/89/729518f93e3c8a9f3f1c8eabac7551330549694c9717180e68651e0963955189/15257711827240.jpg"],"counter":"X2H18014173","type":"real","visible":True,"channels":[{"id":101042858,"name":"Escuteiros Pedestres Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102042858,"name":"Escuteiros Pedestres Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103042858,"name":"Escuteiros Bicicleta Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104042858,"name":"Escuteiros Bicicleta Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":null,"counter":"X2H18014173","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null},{"id":100042868,"name":"Souto","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/dd/41ab4498d9b33296c5c8c8694079780851f83cf32ef1638d0ddf6b9ece9e25dd/15208520922911.jpg","https://filer.eco-counter-tools.com/file/29/5f6363762dd5082fddab4ab18194e4471e790630ec64982d25507b59cbad8e29/15257709040250.jpg"],"counter":"X2H17113874","type":"real","visible":True,"channels":[{"id":101042868,"name":"Multi Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102042868,"name":"Multi Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103042868,"name":"Multi Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104042868,"name":"Multi Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":null,"counter":"X2H17113874","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null},{"id":100042890,"name":"Estação","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/67/ef332c1e4f860f90ef947ba71f7410f22d1974d469ff6605d3f15fa1e6bb0e67/15220742570611.jpg","https://filer.eco-counter-tools.com/file/3b/f8b8e266503e9fd8d508c901b1fc7ff2b4319c33699c109bb173b9b4441e2a3b/15220742573493.jpg","https://filer.eco-counter-tools.com/file/8d/0a623af573545b43a0aa963ec65d3eb145a801dc7ea736832ed995b0d043898d/15220742571482.jpg"],"counter":"XMI17113875","type":"real","visible":True,"channels":[{"id":101042890,"name":"Mobile Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102042890,"name":"Mobile Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103042890,"name":"Mobile Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104042890,"name":"Mobile Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":null,"counter":"XMI17113875","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null},{"id":100044581,"name":"teste","domainId":6167,"domain":"Município da Maia","latitude":0.0,"longitude":0.0,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":[],"counter":null,"type":"virtual","visible":True,"channels":[],"tags":[],"attributes":null},{"id":100044582,"name":"Mobile","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":[],"counter":null,"type":"virtual","visible":false,"channels":[],"tags":[],"attributes":null},{"id":100048817,"name":"Vias Paralelas","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/a2/47412a494433b00d833ce72573877a58d94f1f43240d40df952941d938b3c7a2/15504911057190.jpg"],"counter":"X2I18116922","type":"real","visible":True,"channels":[{"id":101048817,"name":"Channel 1 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":102048817,"name":"Channel 2 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":103048817,"name":"Channel 3 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null},{"id":104048817,"name":"Channel 4 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":null,"counter":"X2I18116922","type":"real","visible":null,"channels":null,"tags":null,"attributes":null}],"tags":[],"attributes":null}]
#dados = [{"id":100042858,"name":"Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/89/729518f93e3c8a9f3f1c8eabac7551330549694c9717180e68651e0963955189/15257711827240.jpg"],"counter":"X2H18014173","type":"real","visible":True,"channels":[{"id":101042858,"name":"Escuteiros Pedestres Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042858,"name":"Escuteiros Pedestres Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042858,"name":"Escuteiros Bicicleta Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042858,"name":"Escuteiros Bicicleta Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100042868,"name":"Souto","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/dd/41ab4498d9b33296c5c8c8694079780851f83cf32ef1638d0ddf6b9ece9e25dd/15208520922911.jpg","https://filer.eco-counter-tools.com/file/29/5f6363762dd5082fddab4ab18194e4471e790630ec64982d25507b59cbad8e29/15257709040250.jpg"],"counter":"X2H17113874","type":"real","visible":True,"channels":[{"id":101042868,"name":"Multi Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042868,"name":"Multi Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042868,"name":"Multi Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042868,"name":"Multi Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100042890,"name":"Estação","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/67/ef332c1e4f860f90ef947ba71f7410f22d1974d469ff6605d3f15fa1e6bb0e67/15220742570611.jpg","https://filer.eco-counter-tools.com/file/3b/f8b8e266503e9fd8d508c901b1fc7ff2b4319c33699c109bb173b9b4441e2a3b/15220742573493.jpg","https://filer.eco-counter-tools.com/file/8d/0a623af573545b43a0aa963ec65d3eb145a801dc7ea736832ed995b0d043898d/15220742571482.jpg"],"counter":"XMI17113875","type":"real","visible":True,"channels":[{"id":101042890,"name":"Mobile Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042890,"name":"Mobile Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042890,"name":"Mobile Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042890,"name":"Mobile Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100044581,"name":"teste","domainId":6167,"domain":"Município da Maia","latitude":0.0,"longitude":0.0,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":[],"counter":None,"type":"virtual","visible":True,"channels":[],"tags":[],"attributes":None},{"id":100044582,"name":"Mobile","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":[],"counter":None,"type":"virtual","visible":false,"channels":[],"tags":[],"attributes":None},{"id":100048817,"name":"Vias Paralelas","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/a2/47412a494433b00d833ce72573877a58d94f1f43240d40df952941d938b3c7a2/15504911057190.jpg"],"counter":"X2I18116922","type":"real","visible":True,"channels":[{"id":101048817,"name":"Channel 1 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102048817,"name":"Channel 2 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103048817,"name":"Channel 3 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104048817,"name":"Channel 4 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None}]
dados = [{"id":100042858,"name":"Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/89/729518f93e3c8a9f3f1c8eabac7551330549694c9717180e68651e0963955189/15257711827240.jpg"],"counter":"X2H18014173","type":"real","visible":True,"channels":[{"id":101042858,"name":"Escuteiros Pedestres Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042858,"name":"Escuteiros Pedestres Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042858,"name":"Escuteiros Bicicleta Souto/Escuteiros","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042858,"name":"Escuteiros Bicicleta Escuteiros/Souto","domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100042868,"name":"Souto","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/dd/41ab4498d9b33296c5c8c8694079780851f83cf32ef1638d0ddf6b9ece9e25dd/15208520922911.jpg","https://filer.eco-counter-tools.com/file/29/5f6363762dd5082fddab4ab18194e4471e790630ec64982d25507b59cbad8e29/15257709040250.jpg"],"counter":"X2H17113874","type":"real","visible":True,"channels":[{"id":101042868,"name":"Multi Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042868,"name":"Multi Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042868,"name":"Multi Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042868,"name":"Multi Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100042890,"name":"Estação","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/67/ef332c1e4f860f90ef947ba71f7410f22d1974d469ff6605d3f15fa1e6bb0e67/15220742570611.jpg","https://filer.eco-counter-tools.com/file/3b/f8b8e266503e9fd8d508c901b1fc7ff2b4319c33699c109bb173b9b4441e2a3b/15220742573493.jpg","https://filer.eco-counter-tools.com/file/8d/0a623af573545b43a0aa963ec65d3eb145a801dc7ea736832ed995b0d043898d/15220742571482.jpg"],"counter":"XMI17113875","type":"real","visible":True,"channels":[{"id":101042890,"name":"Mobile Ped IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042890,"name":"Mobile Ped OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042890,"name":"Mobile Bici IN","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042890,"name":"Mobile Bici OUT","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100044581,"name":"teste","domainId":6167,"domain":"Município da Maia","latitude":0.0,"longitude":0.0,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":[],"counter":None,"type":"virtual","visible":True,"channels":[],"tags":[],"attributes":None},{"id":100044582,"name":"Mobile","domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":[],"counter":None,"type":"virtual","visible":False,"channels":[],"tags":[],"attributes":None},{"id":100048817,"name":"Vias Paralelas","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/a2/47412a494433b00d833ce72573877a58d94f1f43240d40df952941d938b3c7a2/15504911057190.jpg"],"counter":"X2I18116922","type":"real","visible":True,"channels":[{"id":101048817,"name":"Channel 1 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102048817,"name":"Channel 2 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103048817,"name":"Channel 3 IN","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104048817,"name":"Channel 4 OUT","domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None}]
dados = [{"id":100042858,"name":"Escuteiros","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/89/729518f93e3c8a9f3f1c8eabac7551330549694c9717180e68651e0963955189/15257711827240.jpg"],"counter":"X2H18014173","type":"real","visible":True,"channels":[{"id":101042858,"name":"Escuteiros Pedestres Souto/Escuteiros","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042858,"name":"Escuteiros Pedestres Escuteiros/Souto","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042858,"name":"Escuteiros Bicicleta Souto/Escuteiros","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042858,"name":"Escuteiros Bicicleta Escuteiros/Souto","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.23895579422485,"longitude":-8.632939269006851,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-22T00:00:00+0000","firstData":"2018-03-22T00:00:00+0000","photos":None,"counter":"X2H18014173","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100042868,"name":"Souto","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/dd/41ab4498d9b33296c5c8c8694079780851f83cf32ef1638d0ddf6b9ece9e25dd/15208520922911.jpg","https://filer.eco-counter-tools.com/file/29/5f6363762dd5082fddab4ab18194e4471e790630ec64982d25507b59cbad8e29/15257709040250.jpg"],"counter":"X2H17113874","type":"real","visible":True,"channels":[{"id":101042868,"name":"Multi Ped IN","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042868,"name":"Multi Ped OUT","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042868,"name":"Multi Bici IN","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042868,"name":"Multi Bici OUT","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.22780974942758,"longitude":-8.632614856574675,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":"X2H17113874","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100042890,"name":"Estação","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/67/ef332c1e4f860f90ef947ba71f7410f22d1974d469ff6605d3f15fa1e6bb0e67/15220742570611.jpg","https://filer.eco-counter-tools.com/file/3b/f8b8e266503e9fd8d508c901b1fc7ff2b4319c33699c109bb173b9b4441e2a3b/15220742573493.jpg","https://filer.eco-counter-tools.com/file/8d/0a623af573545b43a0aa963ec65d3eb145a801dc7ea736832ed995b0d043898d/15220742571482.jpg"],"counter":"XMI17113875","type":"real","visible":True,"channels":[{"id":101042890,"name":"Mobile Ped IN","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102042890,"name":"Mobile Ped OUT","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103042890,"name":"Mobile Bici IN","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104042890,"name":"Mobile Bici OUT","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":"XMI17113875","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100044581,"name":"teste","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":0.0,"longitude":0.0,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":[],"counter":None,"type":"virtual","visible":True,"channels":[{"id":100044581,"name":"teste","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":0.0,"longitude":0.0,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-02-23T00:00:00+0000","firstData":"2018-02-23T00:00:00+0000","photos":None,"counter":None,"type":"virtual","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100044582,"name":"Mobile","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":[],"counter":None,"type":"virtual","visible":False,"channels":[{"id":100044582,"name":"Mobile","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.234391699343035,"longitude":-8.635428290542848,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-03-23T00:00:00+0000","firstData":"2018-03-23T00:00:00+0000","photos":None,"counter":None,"type":"virtual","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None},{"id":100048817,"name":"Vias Paralelas","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":7,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":5,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":["https://filer.eco-counter-tools.com/file/a2/47412a494433b00d833ce72573877a58d94f1f43240d40df952941d938b3c7a2/15504911057190.jpg"],"counter":"X2I18116922","type":"real","visible":True,"channels":[{"id":101048817,"name":"Channel 1 IN","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":102048817,"name":"Channel 2 OUT","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":1,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":103048817,"name":"Channel 3 IN","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":1,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None},{"id":104048817,"name":"Channel 4 OUT","customSiteId":None,"domainId":6167,"domain":"Município da Maia","latitude":41.241303952181426,"longitude":-8.62672409302101,"userType":2,"timezone":"(UTC+00:00) Europe/Lisbon;DST","interval":60,"sens":2,"installationDate":"2018-12-15T00:00:00+0000","firstData":"2018-12-15T00:00:00+0000","photos":None,"counter":"X2I18116922","type":"real","visible":None,"channels":None,"tags":None,"attributes":None}],"tags":[],"attributes":None}]

readapi=False
readapi=True

modo="jscript"
#modo="curl"

from requests.structures import CaseInsensitiveDict

headers = CaseInsensitiveDict()

if readapi==True:
    if (modo=="jscript"):
        url="https://apieco.eco-counter-tools.com/api/1.0/site?domain_id=6167"
        demotoken ="DEMOTOKEN"
        #demotoken ="92b472bfe030c29e8cd5991a582627e"
        headers["Accept"]= "application/json"
        headers["Authorization"]= "Bearer "+ demotoken
        print(headers)
        resp = requests.get(url, headers=headers)
        print(resp.status_code)
        #print (resp.text)
        print ("===============================================")
        s2s=   resp.text.replace('true', 'True')
        s2s=   s2s.replace('false', 'False')
        s2s=s2s.replace("null", "None")

       	dados = json.dumps(s2s, separators=(',', ':'))
       # print (dados)
        print ("===============================================")
        print (s2s)
    

    else:
        url = "https://apieco.eco-counter-tools.com/token"
        headers["Authorization"] = "Basic KEY, Content-Type: application/x-www-form-urlencoded"
        data = "grant_type=client_credentials"
        resp = requests.post(url, headers=headers, data=data)

        print(resp.status_code)
        #print ("DADOS:", resp.text)
        resp = requests.post(url, headers=headers, data=data)
    print("***** From API")
else:
    print ("----- Dados de teste:")
    print (dados)
    print ("----- fim dos dados")

k=1
print ("K ID        Nome           Lat      Lon   interval  » Sens counter  type tags visible . attributes .")
for j in dados:
    #print (k,"->",j)
    if  type(j)=="real":
        local=j["name"]
        lat='{:.5f}'.format(j["latitude"])
        lon='{:.5f}'.format(j["longitude"])
        ponto=j["id"]
        print (k, ponto, '{:15s}'.format(local), lat, lon, j["interval"], end=" »   ")
        print (j['sens'], j['counter'], j['type'],  j['tags'], j['visible'], ".",j['attributes'],".")
        #print( "    #" ,type (j['channels']), type(j['photos']))
        nc=1
        psql=""
        vsql=""
        for m in j['channels']:
            siteid=m['id']
            descri=m['name']
            print ("         - Chanel", nc,": ", m['id'], "{:15s}".format(m['name']), m['sens'], m['counter'], m['type'])

            url2="https://apieco.eco-counter-tools.com/api/1.0/data/site/"+str(siteid)+"?begin="+inicio+"&end="+fim+"&step=hour"
            print("» request: ", url2)
            resp2 = requests.get(url2, headers=headers)
            print(resp2.status_code, end=" » ")
            #print ("++++++ ",resp2.json())
            print ("» resposta: ", resp2.text)
            r22=resp2.text.replace("null","'null'")
            #print (r22)
            dados=eval(r22)
            #for t in dados:
            #        print (t['date'], t['isodate']. t['counts'], t['status'] )
            termi=dados[0]['date'].index("+")
            sdata=dados[0]['date'][:termi]

            termi=	dados[0]['isoDate'].index("+")
            isodata=dados[0]['isoDate'][:termi]

            psql=psql+"`conta"+str(nc)+"`, estado"+str(nc)+", desc"+str(nc)+", "    
            vsql=vsql+str(dados[0]['counts'])+", "+str(dados[0]['status'])+", '"+descri+"', "
            nc=nc+1
        sql="insert into ecoces (fonte, siteid, lat, lon, regdata, `data`, isodata, "+psql+" `local`)"
        sql=sql + " values ('eco-counter', '"+str(ponto)+"', " + lat+","+lon+", '"+ now.strftime("%Y-%m-%dT%H:%M:%S") + "', " 
        sql=sql + " '"+ sdata+"', '"+isodata+"', "+vsql+ " '"+ local+"'"
        sql=sql+")"    
        print ("     » ",sql)

        if persiste:
            print("Para a Bdados:")
            #print("r:",r)
            try:
                conn = mysql.connector.connect(
                        user="USERNAME",
                        password="PASSWORD",
                        host="localhost",
                        #host="195.23.9.30",
                        port=3306,
                        database="BAZE")
            
            except Error as e:
                print(f"Error connecting to MariaDB Platform: {e}")
                sys.exit(-1)
                
            # Get Cursor
            cur = conn.cursor()
            cur.execute(sql)
            conn.commit()
            print(cur.rowcount)
                
        else:
            print ("----- Valores não persistidos (persiste=",persiste,").")


    k=k+1

